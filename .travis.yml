language: lisp
sudo: required

env:
    matrix:
        - LISP=sbcl
        - LISP=ccl
        # These don't work because rutils tries to intern bordeaux-threads in the cl package
        # figure out how to fix this.
        #- LISP=ecl
        #- LISP=clisp

install:
    - curl -L https://github.com/luismbo/cl-travis/raw/master/install.sh | sh
    - git clone https://gitlab.common-lisp.net/alexandria/alexandria.git ~/lisp/alexandria
    - git clone https://github.com/m2ym/cl-syntax.git ~/lisp/cl-syntax

script:
    - cl -e '(ql:quickload :mexpr-tests)'
         -e '(unless (st:test :package :mexpr-tests)
               (uiop:quit 1))'
